# Evo-Protocol experiment configuration (CaS mode)

benchmark:
  name: cl-bench
  data_path: data/CL-bench.jsonl
  split_ratio:
    train: 0.7
    val: 0.15
    test: 0.15
  split_stratify_by: context_category

evolution:
  mode: cas
  generations: 30
  population_size: 8
  init_population_size: 0
  enable_init_population_diversify: true
  init_population_mutation_attempts: 2
  elite_count: 3
  tasks_per_evaluation: 50
  task_overlap_ratio: 0.5
  calibration_tasks_per_evaluation: 5
  elite_score_current_weight: 0.7
  failure_samples_per_mutation: 5
  enable_failure_classifier: true
  failure_classifier_model: Pro/MiniMaxAI/MiniMax-M2.5
  max_repair_attempts: 2
  max_llm_calls_per_task: 20
  timeout_seconds: 300
  sandbox_timeout_seconds: 30
  fitness_weights:
    answer_correctness: 0.8
    execution_success: 0.1
    compilation_success: 0.1
  tdg_fitness_weights:
    answer_correctness: 0.55
    test_pass_rate: 0.25
    execution_success: 0.15
    compilation_success: 0.05
    false_positive_penalty: 0.5
    adversarial_test_pass_penalty: 0.2
  sandbox_allowed_imports:
    - pydantic
    - networkx
    - enum
    - datetime
    - string
    - operator
    - abc
  selection:
    tau: 0.5
    alpha: 0.5
  meta_architect_model: Pro/MiniMaxAI/MiniMax-M2.5
  worker_model: Pro/MiniMaxAI/MiniMax-M2.5
  seed: 42
  archive_dir: archive

baselines:
  - name: vanilla
    type: direct_call
  - name: cot
    type: direct_call
    system_suffix: "Think step by step."
  - name: react
    type: react_loop
  - name: rag
    type: rag_pipeline
    chunk_size: 1000
  - name: metagpt
    type: multi_agent_static
  - name: gepa
    type: prompt_evolution
    generations: 30
  - name: cas_seed
    type: cas_sandbox
    description: "Generation-0 CaS seed with general-purpose compilation"
  - name: cas_naive
    type: cas_sandbox
    description: "Flat key-value dict compilation baseline"
  - name: cas_pydantic
    type: cas_sandbox
    description: "Always-Pydantic model compilation baseline"

evaluation:
  judge_model: Pro/MiniMaxAI/MiniMax-M2.5
  workers: 20
  max_retries: 3
  final_eval_split: test
  enable_attention_drift: true
  attention_drift_model: Pro/MiniMaxAI/MiniMax-M2.5
  attention_drift_sample_rate: 1.0

transfer:
  experiments:
    - train: [Domain Knowledge Reasoning]
      test: [Rule System Application]
    - train: [Procedural Task Execution]
      test: [Empirical Discovery & Simulation]
    - train: [Domain Knowledge Reasoning, Rule System Application]
      test: [Procedural Task Execution, Empirical Discovery & Simulation]
    - train: [all]
      test: [held_out]
